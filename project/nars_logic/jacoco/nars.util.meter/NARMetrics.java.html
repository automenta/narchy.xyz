<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>NARMetrics.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">OpenNARS Logic Reasoner</a> &gt; <a href="index.source.html" class="el_package">nars.util.meter</a> &gt; <span class="el_source">NARMetrics.java</span></div><h1>NARMetrics.java</h1><pre class="source lang-java linenums">package nars.util.meter;

import nars.NAR;
import nars.util.event.FrameReaction;
import org.jetbrains.annotations.NotNull;

import java.util.ArrayList;
import java.util.List;

public class NARMetrics extends FrameReaction {

    @NotNull
    public final TemporalMetrics&lt;Object&gt; metrics;
    @NotNull
    public final NAR nar;

    public NARMetrics(@NotNull NAR n, int historySize) {
<span class="nc" id="L18">        super(n);</span>

<span class="nc" id="L20">        nar = n;</span>

<span class="nc" id="L22">        metrics = new TemporalMetrics(historySize);</span>

<span class="nc" id="L24">        metrics.addViaReflection(n.memory.emotion);</span>
//
//        if (n.memory.resource!=null)
//            metrics.addViaReflection(n.memory.resource);


        //metrics.addMeter(new BasicStatistics(metrics, n.memory.resource.FRAME_DURATION.id(), 16));
//        if (n.memory.resource!=null)
//            metrics.add(new FirstOrderDifference(metrics, n.memory.resource.CYCLE_RAM_USED.id()));

<span class="nc" id="L34">        metrics.addViaReflection(n.memory.logic);</span>
<span class="nc" id="L35">    }</span>

    @Override
    public void onFrame() {
<span class="nc" id="L39">        metrics.update((double)nar.time());</span>
<span class="nc" id="L40">    }</span>
//
//    @Override
//    public void setActive(boolean b) {
//        super.setActive(b);
//        if (nar!=null)
//            nar.memory.logic.setActive(b);
//    }
//
//    @Override
//    public void event(Class event, Object[] args) {
//        if (event == Events.FrameEnd.class) {
//            if (metrics!=null)
//                metrics.update((double)nar.time());
//        }
//
//    }

    public &lt;S extends Signals&gt; S addMeter(S m) {
<span class="nc" id="L59">        metrics.add(m);</span>
<span class="nc" id="L60">        return m;</span>
    }

    @NotNull
    public TemporalMetrics&lt;Object&gt; getMetrics() {
<span class="nc" id="L65">        return metrics;</span>
    }

    @NotNull
    public SignalData[] getCharts(@NotNull String... names) {
<span class="nc" id="L70">        List&lt;SignalData&gt; l = new ArrayList(names.length);</span>
<span class="nc bnc" id="L71" title="All 2 branches missed.">        for (String n : names) {</span>
<span class="nc" id="L72">            SignalData t = metrics.newSignalData(n);</span>
<span class="nc bnc" id="L73" title="All 2 branches missed.">            if (t!=null)</span>
<span class="nc" id="L74">                l.add(t);</span>
        }
<span class="nc" id="L76">        return l.toArray(new SignalData[l.size()]);</span>
    }

    public List&lt;SignalData&gt; getCharts() {
<span class="nc" id="L80">        return metrics.getSignalDatas();</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.4.201502262128</span></div></body></html>