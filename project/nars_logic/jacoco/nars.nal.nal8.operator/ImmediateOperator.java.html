<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>ImmediateOperator.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">OpenNARS Logic Reasoner</a> &gt; <a href="index.source.html" class="el_package">nars.nal.nal8.operator</a> &gt; <span class="el_source">ImmediateOperator.java</span></div><h1>ImmediateOperator.java</h1><pre class="source lang-java linenums">package nars.nal.nal8.operator;


import nars.$;
import nars.nal.nal8.Operator;
import nars.task.Task;
import nars.term.Term;
import nars.term.compound.Compound;
import org.jetbrains.annotations.NotNull;

/** an operation that executes immediately, and without logical consequences;
 *  used for system control functions  */
public abstract class ImmediateOperator extends NullOperator  {

    @NotNull
    public final Operator op;

<span class="fc" id="L18">    protected ImmediateOperator() {</span>
<span class="fc" id="L19">        op = Operator.the(getOperatorTerm());</span>
<span class="fc" id="L20">    }</span>

//    public Operation newOperation(Object...args) {
//        return new Operation(op, termizedProduct(args));
//    }

//    /** apply Atom.quoteI */
//    static Compound termizedProduct(Object... args) {
//        if (args.length == 0) return TermIndex.Empty;
//        return $.p(termized(args));
//    }
//
//    static Term[] termized(Object... args) {
//        Term[] x = new Term[args.length];
//        for (int i = 0; i &lt; args.length; i++) {
//            Term xx = x[i];
//            Term y = !(args[i] instanceof Term) ? Atom.quote(args[i].toString()) : xx;
//            x[i] = y;
//        }
//        return x;
//    }

//    /** create a new task that wraps this operation */
//    public Task&lt;Operation&gt; newTask(Operation o) {
//        return new AbstractTask(newOperation(o.args()),
//                Symbols.COMMAND,
//                null, 0, 0, 0);
//    }


    public static Task command(@NotNull Class&lt;? extends ImmediateOperator&gt; opClass, Term... args) {
<span class="fc" id="L51">        return Task.command(</span>
<span class="fc" id="L52">                operation(opClass,</span>
                        args)
        );
    }

//    public static Compound operation(Class&lt;? extends ImmediateOperator&gt; opClass, Object... args) {
//        return operation( opClass, termizedProduct(args));
//    }
    public static Compound operation(@NotNull Class&lt;? extends ImmediateOperator&gt; opClass, Term... args) {
<span class="fc" id="L61">        return $.oper(</span>
<span class="fc" id="L62">                $.operator(opClass.getSimpleName()),</span>
                args);
    }


    //    //TODO make Task an interface so this is lightweight
//    public static class ImmediateTask extends DefaultTask&lt;Compound&gt; {
//
//        public final ImmediateOperator operation;
//
//        ImmediateTask(ImmediateOperator o) {
//            super(null,null,null,null);
//            this.operation = o;
//        }
//
//
//        public ImmediateOperator immediateOperation() {
//            return operation;
//        }
//
//        @Override
//        public CharSequence stampAsStringBuilder() {
//            return &quot;&quot;;
//        }
//
//        /**
//         * @return true if it was immediate
//         */
//        @Override
//        public boolean executeIfImmediate(Memory memory) {
////            final Term taskTerm = get();
////            if (taskTerm instanceof Operation) {
////                Operation o = (Operation) taskTerm;
////                o.setTask((Task&lt;Operation&gt;) this);
////
////
////                if (o instanceof ImmediateOperation) {
//                    if (getPunctuation()!= Symbols.GOAL)
//                        throw new RuntimeException(&quot;ImmediateOperation &quot; + immediateOperation() + &quot; was not specified with goal punctuation&quot;);
//
//                    immediateOperation().execute(memory);
//
//                    return true;
//                //}
////            else if (o.getOperator().isImmediate()) {
////                if (sentence!=null &amp;&amp; getPunctuation()!= Symbols.GOAL)
////                    throw new RuntimeException(&quot;ImmediateOperator call &quot; + o + &quot; was not specified with goal punctuation&quot;);
////
////                o.getOperator().execute(o, memory);
////                return true;
////            }
//            //}
//
////            return false;
//        }
//
//
//        @Override
//        public String toString() {
//            return operation.toString();
//        }
//    }



}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.4.201502262128</span></div></body></html>